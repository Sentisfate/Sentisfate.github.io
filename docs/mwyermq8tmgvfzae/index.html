<!DOCTYPE html>
<html><head>
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer" />
   
  <meta name="author" content="gisculibur">
  

   
  
  
  
  
  
  
  <meta name="keywords"
    content="theme,kagome">
  

  

  <meta name="generator" content="Hugo 0.115.2">


  
  
  
  
  <title>è£å‰ªç©ºé—´ ğŸŒŸ GISå’–å–±æ£’</title>

  <meta property="og:title" content="è£å‰ªç©ºé—´" />
<meta property="og:description" content="è£å‰ªç©ºé—´æ˜¯webglèƒ½ç»˜åˆ¶çš„èŒƒå›´ï¼Œ-1~1ï¼Œ0åœ¨ä¸­é—´ï¼Œå½“åæ ‡è¶…å‡ºè¿™ä¸ªèŒƒå›´æ—¶ï¼Œä¸ä¼šæ˜¾ç¤ºå‡ºèŒƒå›´å¤–çš„éƒ¨åˆ†ï¼Œæ­¤å¤–ï¼Œxå’Œyæ–¹å‘çš„å•ä½é•¿åº¦ä¸ºcanvas" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Sentisfate.github.io/docs/mwyermq8tmgvfzae/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2023-07-03T00:53:08+00:00" />
<meta property="article:modified_time" content="2023-07-17T02:38:45+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="è£å‰ªç©ºé—´"/>
<meta name="twitter:description" content="è£å‰ªç©ºé—´æ˜¯webglèƒ½ç»˜åˆ¶çš„èŒƒå›´ï¼Œ-1~1ï¼Œ0åœ¨ä¸­é—´ï¼Œå½“åæ ‡è¶…å‡ºè¿™ä¸ªèŒƒå›´æ—¶ï¼Œä¸ä¼šæ˜¾ç¤ºå‡ºèŒƒå›´å¤–çš„éƒ¨åˆ†ï¼Œæ­¤å¤–ï¼Œxå’Œyæ–¹å‘çš„å•ä½é•¿åº¦ä¸ºcanvas"/>


  
  
  
  
  <link rel="stylesheet" href="https://Sentisfate.github.io/assets/css/style.min.a9eba8a87a1f5444669cfe92317af83504187100f2529f484b2eeaff89777b86.css" integrity="sha256-qeuoqHofVERmnP6SMXr4NQQYcQDyUp9ISy7q/4l3e4Y=">

  <script src="https://Sentisfate.github.io/assets/js/main.min.182da266209851bc7c828aa7377f98f914e1e76c8decdd53a6cbe9bffea92cde.js" integrity="sha256-GC2iZiCYUbx8goqnN3&#43;Y&#43;RTh52yN7N1Tpsvpv/6pLN4="></script>

  </head><body><header class="header-container layout-block layout-padding">
  <div class="header-inner content-padding-large soft-size--large soft-style--box">
    <div class="header-logo">
      <a href="https://Sentisfate.github.io"><h1>GISå’–å–±æ£’</h1></a>
    </div>
    <nav class="header-nav">
      <div class="header-nav--btn">
        <div class="btn-item"></div>
        <div class="btn-item"></div>
        <div class="btn-item"></div>
      </div>
      <div class="header-nav--list">
        <div>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/" title="GISå’–å–±æ£’">ä¸»é¡µ</a>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/docs/" title="Docs">ç¬”è®°</a>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/categories/" title="Categories">åˆ†ç±»</a>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/tags/" title="Tags">æ ‡ç­¾</a>
          
        </div>
      </div>
    </nav>
  </div>
</header><main id="content">
    

    <div class="single-container layout-block">
      <div class="article-info">
        <div class="article-header layout-padding">
          <div class="article-cover card-container content-padding-large soft-size--large soft-style--box img">

  <div class="card-cover">
    
      <img src="https://cdn.nlark.com/yuque/0/2023/png/29064333/1688305561518-88bbc42e-40c3-49ef-bf6a-38ff676fb319.png" alt="https://cdn.nlark.com/yuque/0/2023/png/29064333/1688305561518-88bbc42e-40c3-49ef-bf6a-38ff676fb319.png" />
    
  </div>

  <div class="card-text">
    <h1 class="card-text--title">è£å‰ªç©ºé—´</h1>
    
      <p class="card-text--row">2023-07-03 00:53</p>
      
      
      

      
      
    
  </div>

</div>
        </div>

        <div class="article-content">
          <div class="markdown-body content-padding-large soft-size--large soft-style--box">
            <blockquote>
<p>è£å‰ªç©ºé—´æ˜¯webglèƒ½ç»˜åˆ¶çš„èŒƒå›´ï¼Œ-1~1ï¼Œ0åœ¨ä¸­é—´ï¼Œå½“åæ ‡è¶…å‡ºè¿™ä¸ªèŒƒå›´æ—¶ï¼Œä¸ä¼šæ˜¾ç¤ºå‡ºèŒƒå›´å¤–çš„éƒ¨åˆ†ï¼Œæ­¤å¤–ï¼Œxå’Œyæ–¹å‘çš„å•ä½é•¿åº¦ä¸ºcanvasçš„å®½é«˜çš„ä¸€åŠï¼Œäº’ç›¸ä¸ä¸€å®šç›¸ç­‰

  <p><img src="https://cdn.nlark.com/yuque/0/2023/png/29064333/1688305561518-88bbc42e-40c3-49ef-bf6a-38ff676fb319.png#averageHue=%23fbfbfb&amp;clientId=u46339270-6507-4&amp;from=paste&amp;height=591&amp;id=u00a0870d&amp;originHeight=739&amp;originWidth=1045&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=24597&amp;status=done&amp;style=none&amp;taskId=u6f09c12a-e372-4b5a-ae21-46e7a1fa116&amp;title=&amp;width=836" alt="image.png" loading="lazy" /></p>
</p>
</blockquote>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="å±å¹•åƒç´ åæ ‡è½¬è£å‰ªç©ºé—´">å±å¹•åƒç´ åæ ‡è½¬è£å‰ªç©ºé—´</h1>
<p>åƒç´ åæ ‡çš„å°ºåº¦ä»¥åŠåæ ‡ç³»ä½ç½®ä¸è£å‰ªç©ºé—´å‡ä¸ä¸€è‡´ã€‚éœ€è¦è¿›è¡Œæœ‰ä¸€ä¸ªç¿»è½¬ï¼Œå¹³ç§»å’Œç¼©æ”¾çš„è½¬æ¢ã€‚<!-- raw HTML omitted -->ä¸‹é¢ä»¥ä¸€ä¸ªé•¿å®½ä¸º600ï¼Œ300ï¼Œä¸­å¿ƒç‚¹åœ¨500ï¼Œ400çš„canvasä¸ºä¾‹ã€‚<!-- raw HTML omitted -->
  <p><img src="https://cdn.nlark.com/yuque/0/2023/png/29064333/1688345767633-4251b7d9-1eb0-4909-8f7f-42c07d415b85.png#averageHue=%23fafafa&amp;clientId=ua07cfe1a-0bc1-4&amp;from=paste&amp;height=518&amp;id=u4e5b72ee&amp;originHeight=518&amp;originWidth=720&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=15510&amp;status=done&amp;style=none&amp;taskId=uf96b87e2-cb0f-4113-b043-0c36a7f2ba3&amp;title=&amp;width=720" alt="image.png" loading="lazy" /></p>

<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="å¹³ç§»">å¹³ç§»</h2>
<p>å°†å±å¹•åæ ‡ç³»å¹³ç§»åˆ°canvasçš„ä¸­å¿ƒç‚¹ã€‚æ­£æ–¹å‘å¹³ç§»ä¸ºå‡ï¼Œè´Ÿæ–¹å‘å¹³ç§»ä¸ºåŠ ã€‚åˆ™å¹³ç§»åçš„åæ ‡å…³ç³»å¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ï¼š<!-- raw HTML omitted -->
  <p><img src="https://cdn.nlark.com/yuque/__latex/80adee5627249a4293d3cab1f473ae9a.svg#card=math&amp;code=%5Cleft%5C%7B%20%0A%5Cbegin%7Barray%7D%7Bc%7D%0Ax_1%3Dx-500%20%5C%5C%0Ay_1%3Dy-400%20%0A%5Cend%7Barray%7D%0A%5Cright.&amp;id=etcx6" alt="" loading="lazy" /></p>

<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="ç¿»è½¬">ç¿»è½¬</h2>
<p>ç”±äºå±å¹•åæ ‡ä¸è£å‰ªç©ºé—´yè½´ç›¸åï¼Œè¦å°†yè½´å–åï¼š<!-- raw HTML omitted -->
  <p><img src="https://cdn.nlark.com/yuque/__latex/acc7ca22fa34804bcc23eae95dd8facf.svg#card=math&amp;code=%5Cleft%5C%7B%20%0A%5Cbegin%7Barray%7D%7Bc%7D%0Ax_1%3Dx-500%20%5C%5C%0Ay_1%3D-%28y-400%29%20%0A%5Cend%7Barray%7D%0A%5Cright.&amp;id=xp6yo" alt="" loading="lazy" /></p>

<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="ç¼©æ”¾">ç¼©æ”¾</h2>
<p>è£å‰ªç©ºé—´çš„xæ–¹å‘å•ä½å°ºåº¦ä¸º600/2ï¼Œyæ–¹å‘çš„å•ä½å°ºåº¦ä¸º300/2<!-- raw HTML omitted -->
  <p><img src="https://cdn.nlark.com/yuque/__latex/45699c6214fd679efacf45b8fbd9a210.svg#card=math&amp;code=%5Cleft%5C%7B%20%0A%5Cbegin%7Barray%7D%7Bc%7D%0Ax_1%3D%5Cfrac%7B2%7D%7B600%7D%28x-500%29%20%5C%5C%0Ay_1%3D-%5Cfrac%7B2%7D%7B300%7D%28y-400%29%20%0A%5Cend%7Barray%7D%0A%5Cright.&amp;id=jbjGU" alt="" loading="lazy" /></p>
<!-- raw HTML omitted -->æœ€ç»ˆå½’çº³ä¸º<!-- raw HTML omitted -->
  <p><img src="https://cdn.nlark.com/yuque/__latex/f537b7b95474a56af38a74ae65fbba6d.svg#card=math&amp;code=%5Cleft%5C%7B%20%0A%5Cbegin%7Barray%7D%7Bc%7D%0Ax_1%3D%5Cfrac%7B2%7D%7Bwidth%7D%28x-centerx%29%20%5C%5C%0Ay_1%3D-%5Cfrac%7B2%7D%7Bheight%7D%28y-centery%29%20%0A%5Cend%7Barray%7D%0A%5Cright.&amp;id=TIETd" alt="" loading="lazy" /></p>
<!-- raw HTML omitted -->widthä¸ºcanvasçš„å®½åº¦ï¼Œheightä¸ºé«˜åº¦ï¼Œcenterxï¼Œcenteryä¸ºä¸­å¿ƒç‚¹åƒç´ åæ ‡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">toClipSpace</span>(<span style="color:#a6e22e">positions</span>,<span style="color:#a6e22e">width</span>,<span style="color:#a6e22e">height</span>,<span style="color:#a6e22e">centerx</span>,<span style="color:#a6e22e">centery</span>){
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;<span style="color:#a6e22e">i</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">length</span>;<span style="color:#a6e22e">i</span><span style="color:#f92672">+=</span><span style="color:#ae81ff">2</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">x</span><span style="color:#f92672">=</span><span style="color:#a6e22e">positions</span>[<span style="color:#a6e22e">i</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">y</span><span style="color:#f92672">=</span><span style="color:#a6e22e">positions</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">positions</span>[<span style="color:#a6e22e">i</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span><span style="color:#f92672">/</span><span style="color:#a6e22e">width</span><span style="color:#f92672">*</span>(<span style="color:#a6e22e">x</span><span style="color:#f92672">-</span><span style="color:#a6e22e">centerx</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">positions</span>[<span style="color:#a6e22e">i</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">=-</span><span style="color:#ae81ff">2</span><span style="color:#f92672">/</span><span style="color:#a6e22e">height</span><span style="color:#f92672">*</span>(<span style="color:#a6e22e">y</span><span style="color:#f92672">-</span><span style="color:#a6e22e">centery</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>ç€è‰²å™¨è¿™é‡Œè¸©äº†ä¸ªå‘ï¼ŒglslçŸ©é˜µæ˜¯åˆ—ä¼˜å…ˆï¼Œå†™é”™åå³ä¹˜æˆåŠŸå®ç°åæ ‡å˜æ¢çš„è¯æ˜ï¼š
åˆ©ç”¨è½¬ç½®çŸ©é˜µçš„ç‰¹æ€§
  <p><img src="https://cdn.nlark.com/yuque/__latex/f9a162217c08b3fd5994b0a6645c9d7b.svg#card=math&amp;code=%28AB%29%5ET%3DB%5ETA%5ET%0A&amp;id=rf1ux" alt="" loading="lazy" /></p>
ä»¥åŠglslè¯­è¨€é‡ŒçŸ¢é‡çš„ç‰¹æ€§ï¼ŒçŸ¢é‡è½¬ç½®åå¯ä»¥çœ‹ä½œæ˜¯ç›¸ç­‰çš„ã€‚

  <p><img src="https://cdn.nlark.com/yuque/__latex/3a063930b28b2625a0c4e81ae83e7017.svg#card=math&amp;code=v%27%3DMv%5C%5C%0Av%27%5ET%3Dv%5ETM%5ET%3Dv%27%5C%5C%0A&amp;id=d8Fdf" alt="" loading="lazy" /></p>
</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-glsl" data-lang="glsl"><span style="display:flex;"><span><span style="color:#66d9ef">attribute</span> <span style="color:#66d9ef">vec2</span> a_position;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">uniform</span> <span style="color:#66d9ef">vec2</span> u_resolution;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">uniform</span> <span style="color:#66d9ef">vec2</span> u_center;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> w<span style="color:#f92672">=</span>u_resolution.x;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> h<span style="color:#f92672">=</span>u_resolution.y;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> x<span style="color:#f92672">=</span>u_center.x;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> y<span style="color:#f92672">=</span>u_center.y;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> sx<span style="color:#f92672">=</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">/</span>w;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> sy<span style="color:#f92672">=-</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">/</span>h;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> tx<span style="color:#f92672">=-</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">*</span>x<span style="color:#f92672">/</span>w;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> ty<span style="color:#f92672">=</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">*</span>y<span style="color:#f92672">/</span>h;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// åˆ—ä¼˜å…ˆï¼Œæ³¨æ„ä¸è¦å†™é”™</span>
</span></span><span style="display:flex;"><span>mat3 m<span style="color:#f92672">=</span>mat3(sx,<span style="color:#ae81ff">0.0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0.0</span>,sy,<span style="color:#ae81ff">0.</span>,tx,ty,<span style="color:#ae81ff">1.0</span>);        
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> main() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">vec3</span> position<span style="color:#f92672">=</span><span style="color:#66d9ef">vec3</span>(a_position.x,a_position.y,<span style="color:#ae81ff">1.0</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// é½æ¬¡å˜æ¢çŸ©é˜µ</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// vec3 result=position*m; çŸ©é˜µå†™é”™åæ„å¤–å‘ç°å³ä¹˜èƒ½å®ç°æ•ˆæœğŸ˜‚</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">vec3</span> result<span style="color:#f92672">=</span>m<span style="color:#f92672">*</span>position;
</span></span><span style="display:flex;"><span>  gl_Position <span style="color:#f92672">=</span> <span style="color:#66d9ef">vec4</span>(result.x,result.y,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getMat3</span>(<span style="color:#a6e22e">canvas</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rec</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">getBoundingClientRect</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">center</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">rec</span>.<span style="color:#a6e22e">left</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">rec</span>.<span style="color:#a6e22e">right</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">rec</span>.<span style="color:#a6e22e">top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">rec</span>.<span style="color:#a6e22e">bottom</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">center</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">w</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">width</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">h</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">height</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">w</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0.0</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0.0</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">h</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    (<span style="color:#f92672">-</span><span style="color:#ae81ff">2.0</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">x</span>) <span style="color:#f92672">/</span> <span style="color:#a6e22e">w</span>,
</span></span><span style="display:flex;"><span>    (<span style="color:#ae81ff">2.0</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">y</span>) <span style="color:#f92672">/</span> <span style="color:#a6e22e">h</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">1.0</span>,
</span></span><span style="display:flex;"><span>  ];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è®¾ç½®é¡¶ç‚¹ç€è‰²å™¨ä¸­çš„å…¨å±€å˜é‡ï¼Œå˜æ¢çŸ©é˜µ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">uniformMatrix3fv</span>(
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">u_m</span>,<span style="color:#75715e">//å…¨å±€å˜é‡çš„location
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">false</span>,<span style="color:#75715e">//å¿…é¡»ä¸ºfalse
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Float32Array</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getMat3</span>(<span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">canvas</span>)
</span></span><span style="display:flex;"><span>  )<span style="color:#75715e">//çŸ©é˜µï¼Œä¸€ç»´æ•°ç»„ï¼Œåˆ—ä¼˜å…ˆ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1.0&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">title</span>&gt;Document&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>    #glcanvas {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#66d9ef">black</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">margin-left</span>: <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">margin-top</span>: <span style="color:#ae81ff">40</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">*</span>{
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">style</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">canvas</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;glcanvas&#34;</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;600&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;300&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    ä½ çš„æµè§ˆå™¨ä¼¼ä¹ä¸æ”¯æŒæˆ–è€…ç¦ç”¨äº† HTML5 &lt;<span style="color:#f92672">code</span>&gt;&amp;lt;canvas&amp;gt;&lt;/<span style="color:#f92672">code</span>&gt; å…ƒç´ ã€‚
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">canvas</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">canvas</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;glcanvas&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> {<span style="color:#a6e22e">bottom</span>,<span style="color:#a6e22e">right</span>,<span style="color:#a6e22e">top</span><span style="color:#f92672">:</span><span style="color:#a6e22e">t</span>,<span style="color:#a6e22e">left</span>}<span style="color:#f92672">=</span><span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">getBoundingClientRect</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// è®¡ç®— canvasçš„ä¸­å¿ƒç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">center</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">left</span><span style="color:#f92672">+</span><span style="color:#a6e22e">right</span>)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">bottom</span><span style="color:#f92672">+</span><span style="color:#a6e22e">t</span>)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">gl</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">getContext</span>(<span style="color:#e6db74">&#34;webgl&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ç¡®è®¤ WebGL æ”¯æŒæ€§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">gl</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">alert</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;æ— æ³•åˆå§‹åŒ– WebGLï¼Œä½ çš„æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿæˆ–ç¡¬ä»¶ç­‰å¯èƒ½ä¸æ”¯æŒ WebGLã€‚&#34;</span>
</span></span><span style="display:flex;"><span>      );
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#34;ä¸æ”¯æŒgl&#34;</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// return;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// åˆ›å»ºç€è‰²å™¨çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">createShader</span>(<span style="color:#a6e22e">gl</span>, <span style="color:#a6e22e">type</span>, <span style="color:#a6e22e">source</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">shader</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">createShader</span>(<span style="color:#a6e22e">type</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">shaderSource</span>(<span style="color:#a6e22e">shader</span>, <span style="color:#a6e22e">source</span>); <span style="color:#75715e">//ä¸ºç€è‰²å™¨å¯¹è±¡æä¾›æ•°æ®æºï¼Œå³æˆ‘ä»¬å†™çš„ç€è‰²å™¨ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">compileShader</span>(<span style="color:#a6e22e">shader</span>); <span style="color:#75715e">//ç¼–è¯‘ç€è‰²å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">success</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">getShaderParameter</span>(<span style="color:#a6e22e">shader</span>, <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">COMPILE_STATUS</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// æˆåŠŸç¼–è¯‘åè¿”å›ç€è‰²å™¨å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">success</span>) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">shader</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">positions</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">400</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">200</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">vsSource</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      attribute vec2 a_position;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      uniform vec2 u_resolution;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      uniform vec2 u_center;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      float w=u_resolution.x;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      float h=u_resolution.y;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      float x=u_center.x;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      float y=u_center.y;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      float sx=2.0/w;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      float sy=-2.0/h;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      float tx=-2.0*x/w;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      float ty=2.0*y/h;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      // åˆ—ä¼˜å…ˆï¼Œæ³¨æ„ä¸è¦å†™é”™
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      mat3 m=mat3(sx,0.0,0,0.0,sy,0.,tx,ty,1.0);        
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      void main() {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        vec3 position=vec3(a_position.x,a_position.y,1.0);
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        // é½æ¬¡å˜æ¢çŸ©é˜µ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        // vec3 result=position*m;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        vec3 result=m*position;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        gl_Position = vec4(result.x,result.y,0,1);
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      `</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fsSource</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      //ç‰‡æ®µç€è‰²å™¨æ²¡æœ‰é»˜è®¤ç²¾åº¦ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ä¸€ä¸ªç²¾åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      //mediumpæ˜¯ä¸€ä¸ªä¸é”™çš„é»˜è®¤å€¼ï¼Œä»£è¡¨&#34;mediump precision&#34; ä¸­ç­‰ç²¾åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      precision mediump float;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      void main(){
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        //gl_FragColoræ˜¯ç‰‡æ®µç€è‰²å™¨å†…ç½®çš„ä¸€ä¸ªç”¨äºè¾“å‡ºé¢œè‰²çš„å†…ç½®å˜é‡
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        gl_FragColor=vec4(1,0,0.5,1);
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      `</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// åˆ›å»ºç€è‰²å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">vertexShader</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createShader</span>(<span style="color:#a6e22e">gl</span>, <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">VERTEX_SHADER</span>, <span style="color:#a6e22e">vsSource</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fragmentShader</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createShader</span>(<span style="color:#a6e22e">gl</span>, <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">FRAGMENT_SHADER</span>, <span style="color:#a6e22e">fsSource</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å°†ç€è‰²å™¨é“¾æ¥åˆ°ä¸€ä¸ªprogramç€è‰²ç¨‹åº
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">createProgram</span>(<span style="color:#a6e22e">gl</span>, <span style="color:#a6e22e">vertexShader</span>, <span style="color:#a6e22e">fragmentShader</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">program</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">createProgram</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">attachShader</span>(<span style="color:#a6e22e">program</span>, <span style="color:#a6e22e">vertexShader</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">attachShader</span>(<span style="color:#a6e22e">program</span>, <span style="color:#a6e22e">fragmentShader</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">linkProgram</span>(<span style="color:#a6e22e">program</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">success</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">getProgramParameter</span>(<span style="color:#a6e22e">program</span>, <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">LINK_STATUS</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">success</span>) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">program</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// æœªé“¾æ¥æˆåŠŸï¼Œåˆ™æ‰“å°ç›¸å…³ä¿¡æ¯ï¼Œå¹¶åˆ é™¤å¤±è´¥çš„program
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">getProgramInfoLog</span>(<span style="color:#a6e22e">program</span>))
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">deleteProgram</span>(<span style="color:#a6e22e">program</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">program</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createProgram</span>(<span style="color:#a6e22e">gl</span>, <span style="color:#a6e22e">vertexShader</span>, <span style="color:#a6e22e">fragmentShader</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ä¸ºç€è‰²ç¨‹åºæä¾›æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// è¿™é‡Œglslç¨‹åºå”¯ä¸€è¾“å…¥çš„æ˜¯a_positionå±æ€§å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// å› æ­¤è¦æ‰¾åˆ°è¯¥å±æ€§çš„ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">positionAttributeLocation</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">getAttribLocation</span>(<span style="color:#a6e22e">program</span>, <span style="color:#e6db74">&#39;a_position&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">resolutionUniformLocation</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">getUniformLocation</span>(<span style="color:#a6e22e">program</span>, <span style="color:#e6db74">&#39;u_resolution&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">centerLocation</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">getUniformLocation</span>(<span style="color:#a6e22e">program</span>, <span style="color:#e6db74">&#39;u_center&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å±æ€§å€¼æ˜¯ä»ç¼“å†²åŒºä¸­è·å–ï¼Œå› æ­¤è¦åˆ›å»ºä¸€ä¸ªç¼“å†²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">positionBuffer</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">createBuffer</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// webgl é€šè¿‡ç»‘å®šç‚¹æ¥æ“æ§å…¨å±€èŒƒå›´å†…çš„è®¸å¤šæ•°æ®ï¼Œä½ å¯ä»¥æŠŠç»‘å®šç‚¹æƒ³è±¡æˆä¸€ä¸ªwebglçš„å†…éƒ¨å…¨å±€å˜é‡ï¼Œé¦–å…ˆç»‘å®šä¸€ä¸ªæ•°æ®æºåˆ°ç»‘å®šç‚¹ï¼Œç„¶åå¼•ç”¨ç»‘å®šç‚¹æŒ‡å‘æ•°æ®æº
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// ARRAY_BUFFERå°±æ˜¯ä¸€ä¸ªç»‘å®šç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// å°†ç»‘å®šç‚¹ä¸åˆ›å»ºçš„ç¼“å†²åŒºç›¸å…³è”ï¼Œç”¨äºåé¢è¿›è¡Œå­˜æ”¾æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">bindBuffer</span>(<span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">ARRAY_BUFFER</span>, <span style="color:#a6e22e">positionBuffer</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// é€šè¿‡jsåˆ›å»ºæ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// å°†æ•°æ®é€šè¿‡ç»‘å®šç‚¹å†™å…¥ç¼“å†² å‰é¢åˆ›å»ºçš„positionBuffer
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">bufferData</span>(<span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">ARRAY_BUFFER</span>, <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Float32Array</span>(<span style="color:#a6e22e">positions</span>), <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">STATIC_DRAW</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ä¸Šé¢çš„ä»£ç æ˜¯åˆå§‹åŒ–ä»£ç ï¼Œåœ¨é¡µé¢åŠ è½½åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// åé¢æ˜¯æ¸²æŸ“ä»£ç ï¼Œæ¯æ¬¡ç»˜åˆ¶æˆ–æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// æ ¹æ®ç”»å¸ƒçš„å°ºå¯¸ï¼Œå°†è£å‰ªç©ºé—´åæ ‡æ˜ å°„åˆ°æœ€æ–°å°ºå¯¸çš„ç”»å¸ƒä¸Šï¼Œç”»å¸ƒå°ºå¯¸å‘ç”Ÿå˜åŒ–ï¼Œè¿™æ­¥å¿…é¡»è¦
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">viewport</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">height</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// æ¸…ç©ºç”»å¸ƒ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">clearColor</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0.5</span>)<span style="color:#75715e">//è®¾ç½®æ¸…ç©ºé¢œè‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">clear</span>(<span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">COLOR_BUFFER_BIT</span>)<span style="color:#75715e">//æ¸…ç©ºç”»å¸ƒ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// å‘Šè¯‰webglæ‰§è¡Œå“ªä¸ªç€è‰²ç¨‹åºï¼ˆé¡¶ç‚¹+ç‰‡æ®µç€è‰²å™¨ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">useProgram</span>(<span style="color:#a6e22e">program</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å‘Šè¯‰webglæ€ä¹ˆä»ä¹‹å‰å‡†å¤‡çš„ç¼“å†²ä¸­è·å–æ•°æ®ç»™ç€è‰²å™¨çš„å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// å¯ç”¨å¯¹åº”å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">enableVertexAttribArray</span>(<span style="color:#a6e22e">positionAttributeLocation</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ä»ç¼“å†²ä¸­è¯»å–æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// å°†ç»‘å®šç‚¹ç»‘å®šåˆ°ç¼“å†²ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">bindBuffer</span>(<span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">ARRAY_BUFFER</span>, <span style="color:#a6e22e">positionBuffer</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// è®¾ç½®å…¨å±€å˜é‡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">uniform2f</span>(<span style="color:#a6e22e">resolutionUniformLocation</span>, <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">height</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">uniform2f</span>(<span style="color:#a6e22e">centerLocation</span>, <span style="color:#a6e22e">center</span>.<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">center</span>.<span style="color:#a6e22e">y</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// gl.uniform2f(centerLocation,0,0)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å‘Šè¯‰glåº”è¯¥æ€ä¹ˆè¯»å–ç¼“å†²åŒºä¸­çš„æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">size</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;<span style="color:#75715e">//ä¸€æ¬¡è¯»å–ä¸¤ä¸ªï¼Œå› ä¸ºè¿™é‡Œæ˜¯äºŒç»´çš„ç‚¹ï¼Œæœ‰x,y
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">type</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">FLOAT</span>;<span style="color:#75715e">//è¯»å–æ•°æ®çš„ç±»å‹ï¼Œä¸º32ä½æµ®ç‚¹å‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">normalize</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;<span style="color:#75715e">//æ˜¯å¦éœ€è¦å°†éæµ®ç‚¹å‹æ•°æ®å½’ä¸€åŒ–åˆ°[0ï¼Œ1]æˆ–è€…[-1ï¼Œ1]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//æ¯æ¬¡è¿­ä»£è¿è¡Œè¿åŠ¨å¤šå°‘å†…å­˜åˆ°ä¸‹ä¸€ä¸ªæ•°æ®å¼€å§‹ç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">stride</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;<span style="color:#75715e">//0=ç§»åŠ¨å•ä½æ•°é‡*æ¯ä¸ªå•ä½å ç”¨å†…å­˜(sizeof(type))
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#75715e">//ä»ç¼“å†²åŒºèµ·å§‹ä½ç½®åç§»å¤šå°‘ä½è¯»å–æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// é…ç½®é¡¶ç‚¹å±æ€§æŒ‡é’ˆï¼Œå‘Šè¯‰webglå¦‚ä½•è§£æç€è‰²å™¨ä¸­å®šä¹‰çš„æŸä¸€å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">vertexAttribPointer</span>(<span style="color:#a6e22e">positionAttributeLocation</span>, <span style="color:#a6e22e">size</span>, <span style="color:#a6e22e">type</span>, <span style="color:#a6e22e">normalize</span>, <span style="color:#a6e22e">stride</span>, <span style="color:#a6e22e">offset</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// æ­¤æ—¶a_positionå±æ€§é»˜è®¤ä¸º{x:0,y:0,z:0,w:1}ï¼Œä»ç¼“å†²ä¸­è·å–æ•°æ®æ—¶ï¼Œè·å–åˆ°çš„æ˜¯x,yï¼Œzå’Œwä»æ˜¯0å’Œ1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//å®šä¹‰è¦ç»˜åˆ¶çš„å›¾å½¢çš„ç±»å‹ æ¯3ä¸ªé¡¶ç‚¹ä¸ºä¸€ä¸ªä¸‰è§’å½¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">primitiveType</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">TRIANGLES</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// drawArrays(mode,first,count)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * mode: gl.POINTS,gl.LINE_STRIP,gl.LINE_LOOP,gl.LINES,gl.TRIANGLES_STRIP,gl.TRIANGLES_FAN,gl.TRIANGLES
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * first: æŒ‡å®šé¡¶ç‚¹æ•°ç»„ä¸­çš„èµ·å§‹ç´¢å¼•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * count: æŒ‡å®šè¦æ¸²æŸ“çš„é¡¶ç‚¹æ•°é‡ï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªé¡¶ç‚¹ï¼Œå› æ­¤æ¸²æŸ“3ä¸ª
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">gl</span>.<span style="color:#a6e22e">drawArrays</span>(<span style="color:#a6e22e">primitiveType</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="å˜æ¢çŸ©é˜µ">å˜æ¢çŸ©é˜µ</h2>
<p>å› ä¸ºæœ‰å¹³ç§»å˜æ¢ï¼Œéœ€è¦å¼•å…¥é½æ¬¡åæ ‡ã€‚</p>
<blockquote>
<p>ä¸å¼•å…¥é½æ¬¡åæ ‡çš„å˜æ¢çŸ©é˜µï¼Œåªèƒ½è¡¨è¾¾ç›¸å¯¹äºåŸæ¥åŸç‚¹çš„å˜æ¢ï¼Œä¸èƒ½è¡¨è¾¾å¹³ç§»ï¼Œå› æ­¤éœ€è¦å¤šåŠ ä¸€ä¸ªç»´åº¦æ¥è¡¨ç¤ºã€‚</p>
</blockquote>
<p>
  <p><img src="https://cdn.nlark.com/yuque/__latex/1c6f3205196fd819abb2fe7b34cbd6ab.svg#card=math&amp;code=%5Cbegin%7Bbmatrix%7Dx_1%5C%5Cy_1%5C%5C1%5Cend%7Bbmatrix%7D%3D%0A%5Cbegin%7Bbmatrix%7D%5Cfrac%7B2%7D%7Bwidth%7D%260%26%5Cfrac%7B-2centerx%7D%7Bwidth%7D%5C%5C%0A0%26-%5Cfrac%7B2%7D%7Bheight%7D%26%5Cfrac%7B2centery%7D%7Bheight%7D%5C%5C%0A0%260%261%0A%5Cend%7Bbmatrix%7D%2A%5Cbegin%7Bbmatrix%7Dx%5C%5Cy%5C%5C1%5Cend%7Bbmatrix%7D%0A&amp;id=JjdU1" alt="" loading="lazy" /></p>
</p>
<blockquote>
<p>æ³¨æ„glslé‡ŒçŸ©é˜µåˆ—ä¼˜å…ˆï¼Œä¹Ÿå°±æ˜¯è¯´å†™æˆä¸‹é¢çš„æ ¼å¼</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-glsl" data-lang="glsl"><span style="display:flex;"><span>mat3 m<span style="color:#f92672">=</span>mat3(sx,<span style="color:#ae81ff">0.0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0.0</span>,sy,<span style="color:#ae81ff">0.</span>,tx,ty,<span style="color:#ae81ff">1.0</span>);<span style="color:#75715e">//sxä¸ºxç¼©æ”¾å€æ•°ï¼Œtxä¸ºä½ç§»é‡   </span>
</span></span></code></pre></div>
          </div>
        </div>
                 
      
  
  
  
  

  

  <div class="article-paging">
    
      <section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box">
  <div class="card-cover" ></div>
  <div class="card-text">
    <a href="/docs/syky7w/"><h4 class="card-text--title text-ellipsis">Vueç›¸å…³</h4></a>
    <p class="card-text--row">2023-07-04 01:46</p>
  </div>
</section>
    
    
      <section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box">
  <div class="card-cover" background-image-lazy data-img="https://cdn.nlark.com/yuque/0/2023/jpeg/29064333/1688292152494-63208e69-86d1-4d22-b547-55d72be7f336.jpeg"></div>
  <div class="card-text">
    <a href="/docs/bz6zo38tcq45wv67/"><h4 class="card-text--title text-ellipsis">å…¥é—¨</h4></a>
    <p class="card-text--row">2023-07-02 09:27</p>
  </div>
</section>
    
  </div>
</div>
  <aside class="widget-info">
    
<section class="aside-widget widget-author content-padding-large soft-size--large soft-style--box">
  <div class="widget-body">
    <div class="author-box avatar">
      
      <img class="author-avatar soft-size--round soft-style--box" src="https://cdn.jsdelivr.net/gh/Sentisfate/wanhuatong@main/img/cdai.jfif" alt="gisculibur">
      
      <h2 class="author-name text-ellipsis">gisculibur</h2>
      
      <p class="author-desc text-ellipsis">æ–°æ‰‹WebGISæ”»åŸç‹®</p>
      
    </div>
  </div>
</section>


    

<section class="aside-widget widget-toc content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>ç›®å½•</span>
    </div>
  </h2>
  <div class="widget-body">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#å±å¹•åƒç´ åæ ‡è½¬è£å‰ªç©ºé—´">å±å¹•åƒç´ åæ ‡è½¬è£å‰ªç©ºé—´</a>
      <ul>
        <li><a href="#å¹³ç§»">å¹³ç§»</a></li>
        <li><a href="#ç¿»è½¬">ç¿»è½¬</a></li>
        <li><a href="#ç¼©æ”¾">ç¼©æ”¾</a></li>
        <li><a href="#å˜æ¢çŸ©é˜µ">å˜æ¢çŸ©é˜µ</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</section>


    










<section class="aside-widget widget-articles content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>ç›¸å…³æ–‡ç« </span>
    </div>
  </h2>
  <div class="widget-body">
    <ul class="post-list">
      
      
        <li class="post-item"><a href="/docs/ix726493ddpi6i3q/">3dTiles</a></li>
      
        <li class="post-item"><a href="/posts/qa4vydlw37pbsi3v/">WebGL å›¾åƒå¤„ç†</a></li>
      
        <li class="post-item"><a href="/docs/goz05uyu3i5v92c9/">Cesium æ¨¡å‹å‹å¹³</a></li>
      
        <li class="post-item"><a href="/docs/cl6l0mww8kkkizwb/">ä¸‰è§’å‰–åˆ†</a></li>
      
        <li class="post-item"><a href="/docs/prgrgit7lss8vggf/">GISç†è®ºåŸºç¡€</a></li>
      
        <li class="post-item"><a href="/docs/vzxnspucb4agb00w/">é—®é¢˜</a></li>
      
    </ul>
  </div>
</section>


    




<section class="aside-widget widget-categories content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>åˆ†ç±»</span>
    </div>
  </h2>
  <div class="widget-body">
    <ul class="categories-list">
      
        <li>
          <a href="https://Sentisfate.github.io/categories/webgl/">WebGL</a>
          <span>1</span>
        </li>
      
        <li>
          <a href="https://Sentisfate.github.io/categories/%E5%9B%BE%E5%BA%8A/">å›¾åºŠ</a>
          <span>1</span>
        </li>
      
    </ul>
  </div>

  
</section>


    




<section class="aside-widget widget-tags content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>æ ‡ç­¾</span>
    </div>
  </h2>
  <div class="widget-body">
    <div class="tags-list">
      
        <a href="https://Sentisfate.github.io/tags/github/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">github</a>
      
        <a href="https://Sentisfate.github.io/tags/picgo/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">picgo</a>
      
        <a href="https://Sentisfate.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">å›¾åƒå¤„ç†</a>
      
    </div>
  </div>

  
</section>

  </aside>
</div>
  </main><footer class="footer-container layout-block">
  
  <div class="social-icons">
    
      <a class="soft-size--primary soft-style--box" href="https://github.com/Sentisfate" target="_blank" rel="noopener noreferrer">
          
        <svg class="icon icon-github" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <path d="M64.6 512c0 195.6 125.4 361.9 300.1 422.9 23.5 5.9 19.9-10.8 19.9-22.2v-77.6c-135.8 15.9-141.3-74-150.5-89-18.5-31.5-61.9-39.5-49-54.5 31-15.9 62.5 4 98.9 58 26.4 39.1 77.9 32.5 104.1 26 5.7-23.5 17.9-44.5 34.7-60.9-140.7-25.2-199.4-111.1-199.4-213.3 0-49.5 16.4-95.1 48.4-131.8-20.4-60.6 1.9-112.4 4.9-120.1 58.2-5.2 118.5 41.6 123.3 45.3 33.1-8.9 70.8-13.7 112.9-13.7 42.4 0 80.3 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.4-43.9 2.9 7.7 24.7 58.3 5.5 118.1 32.5 36.8 49 82.8 49 132.4 0 102.3-59 188.3-200.2 213.2 23.5 23.3 38.1 55.5 38.1 91.1v112.7c0.8 9 0 17.9 15.1 17.9C832.7 877 960.4 709.4 960.4 512.1c0-247.5-200.6-447.9-447.9-447.9C265 64.1 64.6 264.5 64.6 512z"></path>
        </svg>
        

        

        

        

        
      </a>
    
  </div>
  

  <div class="colour-bar"></div>
  
  

  

  <p>
    Powered by
    <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a>
    Theme - 
    <a href="https://github.com/miiiku/hugo-theme-kagome" target="_blank" rel="noopener noreferrer author">kagome</a>
  </p>

  <p>
    <a href="javascript:;" id="theme-light">ğŸŒ æµ…è‰²</a>
    <a href="javascript:;" id="theme-dark">ğŸŒ› æ·±è‰²</a>
    <a href="javascript:;" id="theme-auto">ğŸ¤–ï¸ è‡ªåŠ¨</a>
  </p>
</footer>



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>






</body>

</html>