<!DOCTYPE html>
<html><head>
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer" />
   
  <meta name="author" content="gisculibur">
  

   
  
  
  
  
  
  
  <meta name="keywords"
    content="theme,kagome">
  

  

  <meta name="generator" content="Hugo 0.115.2">


  
  
  
  
  <title>MapGIS ğŸŒŸ GISå’–å–±æ£’</title>

  <meta property="og:title" content="MapGIS" />
<meta property="og:description" content="æŠ€æœ¯æ¡†æ¶ ![)1_W6E)2(]SYW`Y(D~{%{XM.jpg](https://cdn.nlark.com/yuque/0/2022/jpeg/29064333/1658280907769-2421a6e1-5f7d-4175-930d-979c5939a321.jpeg#clientId=u63321b2e-dd7a-4&from=paste&height=400&id=u0d6baa0c&originHeight=500&originWidth=900&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55448&status=done&style=none&taskId=u913b9232-f30d-4282-acbc-936bcf4a52e&title=&width=720) ä¸€ã€è½¯ä»¶æ“ä½œ å‘å¸ƒæœåŠ¡ï¼Œæ·»åŠ è¦ç´ é‡åˆ°çš„å‘ï¼Œè¦æ”¹ä¸ªåå­—é‡æ–°å‘å¸ƒ äºŒã€ç¼–è¾‘è¦ç´  å‘mapgisä¸­æ·»åŠ ç‚¹ &lt;!DOCTYPE html&gt; &lt;html lang=&#34;en&#34;&gt; &lt;head&gt; &lt;meta charset=&#34;UTF-8&#34;&gt; &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src=&#34;./dist/include-openlayers-local.js&#34;&gt;&lt;/script&gt; &lt;script src=&#34;./config/map/gao.js&#34;&gt;&lt;/script&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;./config/css/map.css&#34;&gt;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Sentisfate.github.io/docs/patw5f/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2022-07-20T01:13:57+00:00" />
<meta property="article:modified_time" content="2022-11-20T02:04:26+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MapGIS"/>
<meta name="twitter:description" content="æŠ€æœ¯æ¡†æ¶ ![)1_W6E)2(]SYW`Y(D~{%{XM.jpg](https://cdn.nlark.com/yuque/0/2022/jpeg/29064333/1658280907769-2421a6e1-5f7d-4175-930d-979c5939a321.jpeg#clientId=u63321b2e-dd7a-4&from=paste&height=400&id=u0d6baa0c&originHeight=500&originWidth=900&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55448&status=done&style=none&taskId=u913b9232-f30d-4282-acbc-936bcf4a52e&title=&width=720) ä¸€ã€è½¯ä»¶æ“ä½œ å‘å¸ƒæœåŠ¡ï¼Œæ·»åŠ è¦ç´ é‡åˆ°çš„å‘ï¼Œè¦æ”¹ä¸ªåå­—é‡æ–°å‘å¸ƒ äºŒã€ç¼–è¾‘è¦ç´  å‘mapgisä¸­æ·»åŠ ç‚¹ &lt;!DOCTYPE html&gt; &lt;html lang=&#34;en&#34;&gt; &lt;head&gt; &lt;meta charset=&#34;UTF-8&#34;&gt; &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src=&#34;./dist/include-openlayers-local.js&#34;&gt;&lt;/script&gt; &lt;script src=&#34;./config/map/gao.js&#34;&gt;&lt;/script&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;./config/css/map.css&#34;&gt;"/>


  
  
  
  
  <link rel="stylesheet" href="https://Sentisfate.github.io/assets/css/style.min.a9eba8a87a1f5444669cfe92317af83504187100f2529f484b2eeaff89777b86.css" integrity="sha256-qeuoqHofVERmnP6SMXr4NQQYcQDyUp9ISy7q/4l3e4Y=">

  <script src="https://Sentisfate.github.io/assets/js/main.min.182da266209851bc7c828aa7377f98f914e1e76c8decdd53a6cbe9bffea92cde.js" integrity="sha256-GC2iZiCYUbx8goqnN3&#43;Y&#43;RTh52yN7N1Tpsvpv/6pLN4="></script>

  </head><body><header class="header-container layout-block layout-padding">
  <div class="header-inner content-padding-large soft-size--large soft-style--box">
    <div class="header-logo">
      <a href="https://Sentisfate.github.io"><h1>GISå’–å–±æ£’</h1></a>
    </div>
    <nav class="header-nav">
      <div class="header-nav--btn">
        <div class="btn-item"></div>
        <div class="btn-item"></div>
        <div class="btn-item"></div>
      </div>
      <div class="header-nav--list">
        <div>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/" title="GISå’–å–±æ£’">ä¸»é¡µ</a>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/docs/" title="Docs">ç¬”è®°</a>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/categories/" title="Categories">åˆ†ç±»</a>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/tags/" title="Tags">æ ‡ç­¾</a>
          
        </div>
      </div>
    </nav>
  </div>
</header><main id="content">
    

    <div class="single-container layout-block">
      <div class="article-info">
        <div class="article-header layout-padding">
          <div class="article-cover card-container content-padding-large soft-size--large soft-style--box img">

  <div class="card-cover">
    
      <img src="https://cdn.nlark.com/yuque/0/2022/png/29064333/1658279795799-be23abaa-7bb5-41e9-b9dd-7b4c272481bf.png" alt="https://cdn.nlark.com/yuque/0/2022/png/29064333/1658279795799-be23abaa-7bb5-41e9-b9dd-7b4c272481bf.png" />
    
  </div>

  <div class="card-text">
    <h1 class="card-text--title">MapGIS</h1>
    
      <p class="card-text--row">2022-07-20 01:13</p>
      
      
      

      
      
    
  </div>

</div>
        </div>

        <div class="article-content">
          <div class="markdown-body content-padding-large soft-size--large soft-style--box">
            <p>æŠ€æœ¯æ¡†æ¶<!-- raw HTML omitted -->
  <p><img src="https://cdn.nlark.com/yuque/0/2022/png/29064333/1658279795799-be23abaa-7bb5-41e9-b9dd-7b4c272481bf.png#clientId=uc7bf2c8f-170d-4&amp;from=paste&amp;height=300&amp;id=u13cdd04a&amp;originHeight=823&amp;originWidth=1441&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=225551&amp;status=done&amp;style=none&amp;taskId=uc209d5c1-30f8-42aa-baee-5ca6880fbc0&amp;title=&amp;width=525" alt="image.png" loading="lazy" /></p>
<!-- raw HTML omitted -->![)1_W6E)2(]SYW`Y(D~{%{XM.jpg](<a href="https://cdn.nlark.com/yuque/0/2022/jpeg/29064333/1658280907769-2421a6e1-5f7d-4175-930d-979c5939a321.jpeg#clientId=u63321b2e-dd7a-4&amp;from=paste&amp;height=400&amp;id=u0d6baa0c&amp;originHeight=500&amp;originWidth=900&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=55448&amp;status=done&amp;style=none&amp;taskId=u913b9232-f30d-4282-acbc-936bcf4a52e&amp;title=&amp;width=720" target="_blank" rel="noopener">https://cdn.nlark.com/yuque/0/2022/jpeg/29064333/1658280907769-2421a6e1-5f7d-4175-930d-979c5939a321.jpeg#clientId=u63321b2e-dd7a-4&from=paste&height=400&id=u0d6baa0c&originHeight=500&originWidth=900&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55448&status=done&style=none&taskId=u913b9232-f30d-4282-acbc-936bcf4a52e&title=&width=720</a>)</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="ä¸€è½¯ä»¶æ“ä½œ">ä¸€ã€è½¯ä»¶æ“ä½œ</h2>
<p>å‘å¸ƒæœåŠ¡ï¼Œæ·»åŠ è¦ç´ é‡åˆ°çš„å‘ï¼Œè¦æ”¹ä¸ªåå­—é‡æ–°å‘å¸ƒ</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="äºŒç¼–è¾‘è¦ç´ ">äºŒã€ç¼–è¾‘è¦ç´ </h2>
<p>å‘mapgisä¸­æ·»åŠ ç‚¹</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#f92672">&lt;!</span><span style="color:#a6e22e">DOCTYPE</span> <span style="color:#a6e22e">html</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">head</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1.0&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">title</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">Document</span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/title&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./dist/include-openlayers-local.js&#34;</span><span style="color:#f92672">&gt;&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./config/map/gao.js&#34;</span><span style="color:#f92672">&gt;&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./config/css/map.css&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/head&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">body</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ToolLib&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ButtonLib&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;æ·»åŠ ç‚¹è¦ç´ &#34;</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;activate()&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;map&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">map</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">Map</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">target</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;map&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">layers</span><span style="color:#f92672">:</span> [],
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">view</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">View</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">projection</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;EPSG:4326&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">114.30</span>, <span style="color:#ae81ff">30.50</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">zoom</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">docName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mapgis0721&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">docLayer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Map</span>.<span style="color:#a6e22e">Doc</span>(<span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#a6e22e">docName</span>, {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">ip</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;localhost&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">port</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">6163</span>
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">addLayer</span>(<span style="color:#a6e22e">docLayer</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">isAdd</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">activate</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">isAdd</span> <span style="color:#f92672">=</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">isAdd</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isAdd</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;click&#39;</span>, <span style="color:#a6e22e">addPoint</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">un</span>(<span style="color:#e6db74">&#39;click&#39;</span>, <span style="color:#a6e22e">addPoint</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//éšæœºå‡½æ•°ç”Ÿæˆç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">addPoint</span>(<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// è®¾ç½®ç‚¹è¦ç´ çš„ä½ç½®ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gpoint</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">GPoint</span>(...<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">coordinate</span>);<span style="color:#75715e">//createPoint();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fGeom</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureGeometry</span>({ <span style="color:#a6e22e">PntGeom</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">gpoint</span>] });
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// è®¾ç½®æ ·å¼ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">//éšæœºè¾“å‡º1~8ä¹‹é—´çš„æ•´æ•°,ä½œä¸ºæ–°æ·»åŠ çš„è¦ç´ çš„é¢œè‰²å·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pntColor</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">8</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//æè¿°ç‚¹è¦ç´ çš„ç¬¦å·å‚æ•°ä¿¡æ¯ coloré¢œè‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pointInfo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CPointInfo</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Angle</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Color</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">pntColor</span>, <span style="color:#75715e">//è‰²å·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">Space</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">SymHeight</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">12</span>,<span style="color:#75715e">//å®½åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">SymID</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">114</span>,<span style="color:#75715e">//å­å›¾å·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">SymWidth</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">12</span><span style="color:#75715e">//å®½åº¦ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            });
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//è®¾ç½®å½“å‰ç‚¹è¦ç´ çš„å›¾å½¢å‚æ•°ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">webGraphicInfo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">WebGraphicsInfo</span>(
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">//point 1 |line 2| area 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#a6e22e">InfoType</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,<span style="color:#75715e">//ä¸º1ä¸ºç‚¹ï¼Œ2ä¸ºçº¿ï¼Œ3ä¸ºé¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#a6e22e">PntInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">pointInfo</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">attValue</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;åŒ—äº¬&#39;</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªç‚¹è¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">feature</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Feature</span>(
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">fGeom</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fGeom</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">GraphicInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">webGraphicInfo</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">AttValue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attValue</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//è®¾ç½®è¦ç´ ä¸ºç‚¹è¦ç´  //point 1 |line 2| area 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">feature</span>.<span style="color:#a6e22e">setFType</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// è®¾ç½®è¦ç´ é›†ï¼Œæ·»åŠ è¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">featureSet</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureSet</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">clear</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//è®¾ç½®å±æ€§ç»“æ„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cAttStruct</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CAttStruct</span>(
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">FldName</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;name&#34;</span>],
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">FldNumber</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">FldType</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;string&#34;</span>]
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">AttStruct</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cAttStruct</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//æ·»åŠ è¦ç´ åˆ°è¦ç´ æ•°æ®é›†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">addFeature</span>(<span style="color:#a6e22e">feature</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// è°ƒç”¨ä¸­åœ°æœåŠ¡æ·»åŠ è¦ç´   ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åœ°å›¾æ–‡æ¡£çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦ç´ æ‰€åœ¨çš„å›¾å±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">editService</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">EditDocFeature</span>(<span style="color:#a6e22e">docName</span>, <span style="color:#ae81ff">3</span>, {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">ip</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;localhost&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">port</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;6163&#34;</span>    <span style="color:#75715e">//è®¿é—®IGServerçš„ç«¯å£å·ï¼Œ.netç‰ˆä¸º6163ï¼ŒJavaç‰ˆä¸º8089
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            });
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">featureSet</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//æ‰§è¡Œæ·»åŠ ç‚¹è¦ç´ åŠŸèƒ½
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">editService</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">featureSet</span>, <span style="color:#a6e22e">onPntSuccess</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//æ·»åŠ ç‚¹è¦ç´ å›è°ƒå‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onPntSuccess</span>(<span style="color:#a6e22e">data</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">succeed</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;æ·»åŠ ç‚¹è¦ç´ æˆåŠŸï¼&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">docLayer</span>.<span style="color:#a6e22e">refresh</span>();
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;æ·»åŠ ç‚¹è¦ç´ å¤±è´¥ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/body&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/html&gt;</span>
</span></span></code></pre></div><p>æ·»åŠ çº¿</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">title</span>&gt;Document&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./dist/include-openlayers-local.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./config/map/gao.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./config/css/map.css&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./utils/Draw.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;map&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">map</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">Map</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">target</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;map&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">layers</span><span style="color:#f92672">:</span> [],
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">view</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">View</span>({
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">projection</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;EPSG:4326&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">114.30</span>, <span style="color:#ae81ff">30.50</span>],
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">zoom</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">docName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mapgis0727&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ip</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;localhost&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">port</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">6163</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">docLayer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Map</span>.<span style="color:#a6e22e">Doc</span>(<span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#a6e22e">docName</span>, {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">port</span>,
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">addLayer</span>(<span style="color:#a6e22e">docLayer</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">source</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">source</span>.<span style="color:#a6e22e">Vector</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">wrapX</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">draw</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createDraw</span>({ <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;LineString&#39;</span>, <span style="color:#a6e22e">source</span> })
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">layer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">layer</span>.<span style="color:#a6e22e">Vector</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">source</span>,
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">addLayer</span>(<span style="color:#a6e22e">layer</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">addInteraction</span>(<span style="color:#a6e22e">draw</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">draw</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;drawend&#39;</span>, <span style="color:#a6e22e">addLine</span>)
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">addLine</span>(<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">res</span>, <span style="color:#a6e22e">rej</span>) =&gt; { <span style="color:#a6e22e">res</span>() }).<span style="color:#a6e22e">then</span>(() =&gt; { <span style="color:#a6e22e">source</span>.<span style="color:#a6e22e">clear</span>() })
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pointObj</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Array()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">arr</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">feature</span>.<span style="color:#a6e22e">getGeometry</span>().<span style="color:#a6e22e">getCoordinates</span>()
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">arr</span>.<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">item</span> =&gt; {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">pointObj</span>.<span style="color:#a6e22e">push</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Point2D</span>(...<span style="color:#a6e22e">item</span>))
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// pointObj[0] = new Zondy.Object.Point2D(114, 30);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// pointObj[1] = new Zondy.Object.Point2D(104.07, 30.67);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gArc</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Arc</span>(<span style="color:#a6e22e">pointObj</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//æ„æˆçº¿çš„æŠ˜çº¿
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gAnyLine</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">AnyLine</span>([<span style="color:#a6e22e">gArc</span>]);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//è®¾ç½®çº¿è¦ç´ çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gline</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">GLine</span>(<span style="color:#a6e22e">gAnyLine</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//è®¾ç½®è¦ç´ çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fGeom</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureGeometry</span>({ <span style="color:#a6e22e">LinGeom</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">gline</span>] });
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//éšæœºè¾“å‡º1~8ä¹‹é—´çš„æ•´æ•°,ä½œä¸ºæ–°æ·»åŠ çš„è¦ç´ çš„é¢œè‰²å·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">lineColor</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">8</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">clineInfo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CLineInfo</span>(
</span></span><span style="display:flex;"><span>          {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Color&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">lineColor</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;LinStyleID&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;LinStyleID2&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;LinWidth&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Xscale&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Yscale&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>          });
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">graphicInfo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">WebGraphicsInfo</span>({ <span style="color:#a6e22e">InfoType</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">LinInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">clineInfo</span> });
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//è®¾ç½®æ·»åŠ çº¿è¦ç´ çš„å±æ€§ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">attValue</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;æˆæ­¦çº¿&#39;</span>];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªçº¿è¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">newFeature</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Feature</span>({ <span style="color:#a6e22e">fGeom</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fGeom</span>, <span style="color:#a6e22e">GraphicInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">graphicInfo</span>, <span style="color:#a6e22e">AttValue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attValue</span> });
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//è®¾ç½®è¦ç´ ä¸ºçº¿è¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">newFeature</span>.<span style="color:#a6e22e">setFType</span>(<span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªè¦ç´ æ•°æ®é›†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">featureSet</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureSet</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fldNumber</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; <span style="color:#75715e">//å±æ€§ä¸ªæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fldName</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;name&#34;</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fldType</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;string&#34;</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//åˆ›å»ºå±æ€§ç»“æ„è®¾ç½®å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cAttStruct</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CAttStruct</span>({ <span style="color:#a6e22e">FldName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fldName</span>, <span style="color:#a6e22e">FldNumber</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fldNumber</span>, <span style="color:#a6e22e">FldType</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fldType</span> });
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//è®¾ç½®è¦ç´ æ•°æ®é›†çš„æ ‘å½¢ç»“æ„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">AttStruct</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cAttStruct</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//å°†æ·»åŠ çš„çº¿è¦ç´ æ·»åŠ åˆ°å±æ€§æ•°æ®é›†ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">addFeature</span>(<span style="color:#a6e22e">newFeature</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">editDocFeature</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">EditDocFeature</span>(<span style="color:#a6e22e">docName</span>, <span style="color:#ae81ff">1</span>, {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">port</span>    <span style="color:#75715e">//è®¿é—®IGServerçš„ç«¯å£å·ï¼Œ.netç‰ˆä¸º6163ï¼ŒJavaç‰ˆä¸º8089 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">editDocFeature</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">featureSet</span>, <span style="color:#a6e22e">onLineSuccess</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onLineSuccess</span>(<span style="color:#a6e22e">rlt</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">rlt</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">result</span>) {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;æ·»åŠ çº¿è¦ç´ æˆåŠŸï¼&#34;</span>);
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">docLayer</span>.<span style="color:#a6e22e">refresh</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;æ·»åŠ çº¿è¦ç´ å¤±è´¥ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><p>æ·»åŠ é¢</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="ä¸‰å°è£…ç‚¹çº¿é¢å·¥å…·ç±»">ä¸‰ã€å°è£…ç‚¹çº¿é¢å·¥å…·ç±»</h2>
<p>ES6æ¥å°è£…ç‚¹çº¿é¢çš„æ·»åŠ </p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pntColor</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">8</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">POINT_STYLE</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CPointInfo</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Angle</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Color</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Space</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">SymHeight</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">SymID</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">114</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">SymWidth</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {array} position
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {array} attr [{key:&#39;name&#39;,type:&#39;string&#39;,value:&#39;æ­¦æ±‰&#39;}]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {object} service {docName,layerID,docLayer,ip(optional),port(optional)}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {object} pointStyle new Zondy.Object.CPointInfo optional
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">add</span>({ <span style="color:#a6e22e">position</span>, <span style="color:#a6e22e">attr</span>, <span style="color:#a6e22e">service</span>, <span style="color:#a6e22e">pointStyle</span> }) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªç‚¹å½¢çŠ¶ï¼Œæè¿°ç‚¹å½¢çŠ¶çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gpoint</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">GPoint</span>(...<span style="color:#a6e22e">position</span>); <span style="color:#75715e">//createPoint();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//è®¾ç½®å½“å‰ç‚¹è¦ç´ çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fGeom</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureGeometry</span>({ <span style="color:#a6e22e">PntGeom</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">gpoint</span>] });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//éšæœºè¾“å‡º1~8ä¹‹é—´çš„æ•´æ•°,ä½œä¸ºæ–°æ·»åŠ çš„è¦ç´ çš„é¢œè‰²å·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//æè¿°ç‚¹è¦ç´ çš„ç¬¦å·å‚æ•°ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pointInfo</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">POINT_STYLE</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">pointStyle</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">pointInfo</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pointStyle</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®å½“å‰ç‚¹è¦ç´ çš„å›¾å½¢å‚æ•°ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">webGraphicInfo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">WebGraphicsInfo</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">InfoType</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">PntInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">pointInfo</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®æ·»åŠ ç‚¹è¦ç´ çš„å±æ€§ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">attValue</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">value</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªè¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">feature</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Feature</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">fGeom</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fGeom</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">GraphicInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">webGraphicInfo</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AttValue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attValue</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®è¦ç´ ä¸ºç‚¹è¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">feature</span>.<span style="color:#a6e22e">setFType</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªè¦ç´ æ•°æ®é›†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">featureSet</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureSet</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">clear</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®å±æ€§ç»“æ„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cAttStruct</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CAttStruct</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">key</span>),
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldNumber</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">length</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldType</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">type</span>),
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">AttStruct</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cAttStruct</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//æ·»åŠ è¦ç´ åˆ°è¦ç´ æ•°æ®é›†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">addFeature</span>(<span style="color:#a6e22e">feature</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªç¼–è¾‘æœåŠ¡ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">ip</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">ip</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">ip</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;localhost&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">port</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">port</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">port</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;6163&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">editService</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">EditDocFeature</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">docName</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">layerID</span>,
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">port</span>, <span style="color:#75715e">//è®¿é—®IGServerçš„ç«¯å£å·ï¼Œ.netç‰ˆä¸º6163ï¼ŒJavaç‰ˆä¸º8089
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//æ‰§è¡Œæ·»åŠ ç‚¹è¦ç´ åŠŸèƒ½
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">editService</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">featureSet</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">onAddSuccess</span>(<span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">docLayer</span>));
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">onAddSuccess</span>(<span style="color:#a6e22e">docLayer</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">data</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">succeed</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;æ·»åŠ ç‚¹è¦ç´ æˆåŠŸï¼&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">docLayer</span>.<span style="color:#a6e22e">refresh</span>();
</span></span><span style="display:flex;"><span>      } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;æ·»åŠ ç‚¹è¦ç´ å¤±è´¥ï¼&#39;</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// let lineColor = Math.floor(Math.random() * 8 + 1);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">LINE_STYLE</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CLineInfo</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Color</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">LinStyleID</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">LinStyleID2</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">LinWidth</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Xscale</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Yscale</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Line</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {array} position [[],[],]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {array} attr   [{key:,value:,type:}]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {Object} service {layerID,docName,docLayer[,ip,port,]}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {Object} lineStyle {æ ·å¼ä¿¡æ¯å¯é€‰}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">add</span>({ <span style="color:#a6e22e">position</span>, <span style="color:#a6e22e">attr</span>, <span style="color:#a6e22e">service</span>, <span style="color:#a6e22e">lineStyle</span> }) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pointObj</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Point2D</span>(...<span style="color:#a6e22e">item</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gArc</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Arc</span>(<span style="color:#a6e22e">pointObj</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//æ„æˆçº¿çš„æŠ˜çº¿
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gAnyLine</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">AnyLine</span>([<span style="color:#a6e22e">gArc</span>]);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®çº¿è¦ç´ çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gline</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">GLine</span>(<span style="color:#a6e22e">gAnyLine</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®è¦ç´ çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fGeom</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureGeometry</span>({ <span style="color:#a6e22e">LinGeom</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">gline</span>] });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//éšæœºè¾“å‡º1~8ä¹‹é—´çš„æ•´æ•°,ä½œä¸ºæ–°æ·»åŠ çš„è¦ç´ çš„é¢œè‰²å·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">lineInfo</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">LINE_STYLE</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">lineStyle</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">lineInfo</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">lineStyle</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">graphicInfo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">WebGraphicsInfo</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">InfoType</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">LinInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">lineInfo</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®æ·»åŠ çº¿è¦ç´ çš„å±æ€§ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">attValue</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">value</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªçº¿è¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">newFeature</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Feature</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">fGeom</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fGeom</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">GraphicInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">graphicInfo</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AttValue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attValue</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®è¦ç´ ä¸ºçº¿è¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">newFeature</span>.<span style="color:#a6e22e">setFType</span>(<span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªè¦ç´ æ•°æ®é›†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">featureSet</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureSet</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fldNumber</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">length</span>; <span style="color:#75715e">//å±æ€§ä¸ªæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fldName</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">key</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fldType</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">type</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºå±æ€§ç»“æ„è®¾ç½®å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cAttStruct</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CAttStruct</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fldName</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldNumber</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fldNumber</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldType</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fldType</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®è¦ç´ æ•°æ®é›†çš„æ ‘å½¢ç»“æ„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">AttStruct</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cAttStruct</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//å°†æ·»åŠ çš„çº¿è¦ç´ æ·»åŠ åˆ°å±æ€§æ•°æ®é›†ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">addFeature</span>(<span style="color:#a6e22e">newFeature</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">ip</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;localhost&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">port</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">6163</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">editDocFeature</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">EditDocFeature</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">docName</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">layerID</span>,
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">port</span>, <span style="color:#75715e">//è®¿é—®IGServerçš„ç«¯å£å·ï¼Œ.netç‰ˆä¸º6163ï¼ŒJavaç‰ˆä¸º8089
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">editDocFeature</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">featureSet</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">onAddSuccess</span>(<span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">docLayer</span>));
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">onAddSuccess</span>(<span style="color:#a6e22e">docLayer</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">rlt</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">rlt</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">result</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;æ·»åŠ çº¿è¦ç´ æˆåŠŸï¼&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">docLayer</span>.<span style="color:#a6e22e">refresh</span>();
</span></span><span style="display:flex;"><span>      } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;æ·»åŠ çº¿è¦ç´ å¤±è´¥ï¼&#39;</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">AREA_STYLE</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CRegionInfo</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">EndColor</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">FillColor</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">FillMode</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">OutPenWidth</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">OverMethod</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">PatAngle</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">PatColor</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">PatHeight</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">PatID</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">27</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">PatWidth</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Area</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {array} position [[],[],]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {array} attr   [{key:,value:,type:}]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {Object} service {layerID,docName,docLayer[,ip,port,]}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {Object} areaStyle {æ ·å¼ä¿¡æ¯å¯é€‰}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">add</span>({ <span style="color:#a6e22e">position</span>, <span style="color:#a6e22e">attr</span>, <span style="color:#a6e22e">service</span>, <span style="color:#a6e22e">areaStyle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">AREA_STYLE</span> }) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pointObj</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">position</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Point2D</span>(...<span style="color:#a6e22e">item</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®åŒºè¦ç´ çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gArc</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Arc</span>(<span style="color:#a6e22e">pointObj</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//æ„æˆåŒºè¦ç´ æŠ˜çº¿
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gAnyLine</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">AnyLine</span>([<span style="color:#a6e22e">gArc</span>]);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//æ„æˆåŒºè¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gRegion</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">GRegion</span>([<span style="color:#a6e22e">gAnyLine</span>]);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//æ„æˆåŒºè¦ç´ çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fGeom</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureGeometry</span>({ <span style="color:#a6e22e">RegGeom</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">gRegion</span>] });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//éšæœºè¾“å‡º1~1502ä¹‹é—´çš„æ•´æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fillColor</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">1502</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®åŒºè¦ç´ çš„å›¾å½¢å‚æ•°ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cRegionInfo</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">areaStyle</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è¦ç´ å›¾å½¢å‚æ•°ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">graphicInfo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">WebGraphicsInfo</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">InfoType</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">RegInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">cRegionInfo</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">attValue</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">value</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªæ–°çš„åŒºè¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">newFeature</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Feature</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AttValue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attValue</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">fGeom</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fGeom</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">GraphicInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">graphicInfo</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">newFeature</span>.<span style="color:#a6e22e">setFType</span>(<span style="color:#ae81ff">3</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªè¦ç´ æ•°æ®é›†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">featureSet</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureSet</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fldNumber</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">length</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fldType</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">type</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fldName</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">key</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cAttValue</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CAttStruct</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldNumber</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fldNumber</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldType</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fldType</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fldName</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">AttStruct</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cAttValue</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">addFeature</span>(<span style="color:#a6e22e">newFeature</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">ip</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;localhost&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">port</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">6163</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">editDocFeature</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">EditDocFeature</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">docName</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">layerID</span>,
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">port</span>, <span style="color:#75715e">//è®¿é—®IGServerçš„ç«¯å£å·ï¼Œ.netç‰ˆä¸º6163ï¼ŒJavaç‰ˆä¸º8089
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#ae81ff">11</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">editDocFeature</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">featureSet</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">onAddSuccess</span>(<span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">docLayer</span>));
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// addArea()
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">onAddSuccess</span>(<span style="color:#a6e22e">docLayer</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">data</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">succeed</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;æ·»åŠ åŒºè¦ç´ æˆåŠŸï¼&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">docLayer</span>.<span style="color:#a6e22e">refresh</span>();
</span></span><span style="display:flex;"><span>      } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;æ·»åŠ åŒºè¦ç´ å¤±è´¥ï¼&#39;</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="å››å°è£…æŸ¥è¯¢">å››ã€å°è£…æŸ¥è¯¢</h2>
<p>ç‚¹æŸ¥è¯¢</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pntColor</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">8</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">POINT_STYLE</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CPointInfo</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Angle</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Color</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Space</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">SymHeight</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">SymID</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">114</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">SymWidth</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">query</span>({ <span style="color:#a6e22e">position</span>, <span style="color:#a6e22e">service</span>, <span style="color:#a6e22e">radius</span>, <span style="color:#a6e22e">onSuccess</span>, <span style="color:#a6e22e">map</span> }) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">queryStruct</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">QueryFeatureStruct</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryStruct</span>.<span style="color:#a6e22e">IncludeGeometry</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryStruct</span>.<span style="color:#a6e22e">IncludeWebGraphic</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªç”¨äºæŸ¥è¯¢çš„ç‚¹å½¢çŠ¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pointObj</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Point2D</span>(...<span style="color:#a6e22e">position</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®ç‚¹å®¹å·®åŠå¾„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">pointObj</span>.<span style="color:#a6e22e">nearDis</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radius</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//å®šä¹‰æŸ¥è¯¢è§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">rule</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">QueryFeatureRule</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//æ˜¯å¦å°†è¦ç´ çš„å¯è§æ€§è®¡ç®—åœ¨å†…
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">EnableDisplayCondition</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//æ˜¯å¦å®Œå…¨åŒ…å«
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">MustInside</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//æ˜¯å¦ä»…æ¯”è¾ƒè¦ç´ çš„å¤–åŒ…çŸ©å½¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">CompareRectOnly</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//æ˜¯å¦ç›¸äº¤
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">Intersect</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å®ä¾‹åŒ–æŸ¥è¯¢å‚æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">queryParam</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">QueryParameter</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">geometry</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">pointObj</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">resultFormat</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;json&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">struct</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">queryStruct</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">rule</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ip</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;localhost&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">port</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">6163</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">queryService</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">QueryDocFeature</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">queryParam</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">docName</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">layerID</span>,
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">port</span>, <span style="color:#75715e">//è®¿é—®IGServerçš„ç«¯å£å·ï¼Œ.netç‰ˆä¸º6163ï¼ŒJavaç‰ˆä¸º8089
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">onSuccess</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">queryService</span>.<span style="color:#a6e22e">query</span>(<span style="color:#a6e22e">onSuccess</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">queryService</span>.<span style="color:#a6e22e">query</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">querySuccess</span>(<span style="color:#a6e22e">map</span>));
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;å‚æ•°æœ‰è¯¯ï¼Œæ— æ³•æŸ¥è¯¢&#39;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">querySuccess</span>(<span style="color:#a6e22e">map</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">result</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">format</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Format</span>.<span style="color:#a6e22e">PolygonJSON</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// å°†MapGISè¦ç´ JSONååºåˆ—åŒ–ä¸ºolå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">features</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">format</span>.<span style="color:#a6e22e">read</span>(<span style="color:#a6e22e">result</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//å®šä¹‰æ•°æ®æºæ¥æ¥æ”¶æŸ¥è¯¢åˆ°çš„è¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">drawSource</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">source</span>.<span style="color:#a6e22e">Vector</span>({
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">wrapX</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//æ·»åŠ åˆ°æ•°æ®æºé‡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">drawSource</span>.<span style="color:#a6e22e">addFeatures</span>(<span style="color:#a6e22e">features</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">drawLayer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">layer</span>.<span style="color:#a6e22e">Vector</span>({
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">source</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">drawSource</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">style</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">Style</span>({
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//å¡«å……è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">fill</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">Fill</span>({
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;rgba(23, 159, 219, 0.5)&#39;</span>,
</span></span><span style="display:flex;"><span>            }),
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//è¾¹çº¿æ ·å¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">stroke</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">Stroke</span>({
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;rgba(23, 159, 219, 1)&#39;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            }),
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">image</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">Circle</span>({
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">12</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">fill</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">Fill</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">color</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;rgba(23, 159, 219, 0.5)&#39;</span>,
</span></span><span style="display:flex;"><span>              }),
</span></span><span style="display:flex;"><span>            }),
</span></span><span style="display:flex;"><span>          }),
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">addLayer</span>(<span style="color:#a6e22e">drawLayer</span>);
</span></span><span style="display:flex;"><span>      } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">err</span>) {}
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {array} position
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {array} attr [{key:&#39;name&#39;,type:&#39;string&#39;,value:&#39;æ­¦æ±‰&#39;}]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {object} service {docName,layerID,docLayer,ip(optional),port(optional)}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @param {object} pointStyle new Zondy.Object.CPointInfo optional
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">add</span>({ <span style="color:#a6e22e">position</span>, <span style="color:#a6e22e">attr</span>, <span style="color:#a6e22e">service</span>, <span style="color:#a6e22e">pointStyle</span> }) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªç‚¹å½¢çŠ¶ï¼Œæè¿°ç‚¹å½¢çŠ¶çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">gpoint</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">GPoint</span>(...<span style="color:#a6e22e">position</span>); <span style="color:#75715e">//createPoint();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//è®¾ç½®å½“å‰ç‚¹è¦ç´ çš„å‡ ä½•ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fGeom</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureGeometry</span>({ <span style="color:#a6e22e">PntGeom</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">gpoint</span>] });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//éšæœºè¾“å‡º1~8ä¹‹é—´çš„æ•´æ•°,ä½œä¸ºæ–°æ·»åŠ çš„è¦ç´ çš„é¢œè‰²å·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//æè¿°ç‚¹è¦ç´ çš„ç¬¦å·å‚æ•°ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pointInfo</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">POINT_STYLE</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">pointStyle</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">pointInfo</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pointStyle</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®å½“å‰ç‚¹è¦ç´ çš„å›¾å½¢å‚æ•°ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">webGraphicInfo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">WebGraphicsInfo</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">InfoType</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">PntInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">pointInfo</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®æ·»åŠ ç‚¹è¦ç´ çš„å±æ€§ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">attValue</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">value</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªè¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">feature</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Feature</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">fGeom</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fGeom</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">GraphicInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">webGraphicInfo</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AttValue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attValue</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®è¦ç´ ä¸ºç‚¹è¦ç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">feature</span>.<span style="color:#a6e22e">setFType</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªè¦ç´ æ•°æ®é›†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">featureSet</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">FeatureSet</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">clear</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è®¾ç½®å±æ€§ç»“æ„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cAttStruct</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">CAttStruct</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">key</span>),
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldNumber</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">length</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">FldType</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">attr</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>) =&gt; <span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">type</span>),
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">AttStruct</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cAttStruct</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//æ·»åŠ è¦ç´ åˆ°è¦ç´ æ•°æ®é›†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">featureSet</span>.<span style="color:#a6e22e">addFeature</span>(<span style="color:#a6e22e">feature</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//åˆ›å»ºä¸€ä¸ªç¼–è¾‘æœåŠ¡ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">ip</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">ip</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">ip</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;localhost&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">port</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">port</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">port</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;6163&#39;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">editService</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">EditDocFeature</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">docName</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">layerID</span>,
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">port</span>, <span style="color:#75715e">//è®¿é—®IGServerçš„ç«¯å£å·ï¼Œ.netç‰ˆä¸º6163ï¼ŒJavaç‰ˆä¸º8089
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//æ‰§è¡Œæ·»åŠ ç‚¹è¦ç´ åŠŸèƒ½
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">editService</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">featureSet</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">onAddSuccess</span>(<span style="color:#a6e22e">service</span>.<span style="color:#a6e22e">docLayer</span>));
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">onAddSuccess</span>(<span style="color:#a6e22e">docLayer</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">data</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">succeed</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;æ·»åŠ ç‚¹è¦ç´ æˆåŠŸï¼&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">docLayer</span>.<span style="color:#a6e22e">refresh</span>();
</span></span><span style="display:flex;"><span>      } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;æ·»åŠ ç‚¹è¦ç´ å¤±è´¥ï¼&#39;</span>);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ‹‰æ¡†æŸ¥è¯¢</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="äº”ç©ºé—´åˆ†æ">äº”ã€ç©ºé—´åˆ†æ</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="1æ‹“æ‰‘åˆ†æ">1.æ‹“æ‰‘åˆ†æ</h3>
<ul>
<li>ç›¸é‚»</li>
<li>ç›¸ç¦»</li>
<li>ç›¸äº¤</li>
<li>åŒ…å«
:::info</li>
</ul>
<ol>
<li>åˆ›å»ºæ¯”è¾ƒç‚¹</li>
<li>åˆ›å»ºå‚è€ƒç‚¹</li>
<li>è°ƒç”¨åˆ†ææœåŠ¡
:::
<!-- raw HTML omitted --><!-- raw HTML omitted --></li>
</ol>
<h3 id="2å åŠ åˆ†æ">2.å åŠ åˆ†æ</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#f92672">&lt;!</span><span style="color:#a6e22e">DOCTYPE</span> <span style="color:#a6e22e">html</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;viewport&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">title</span>&gt;<span style="color:#a6e22e">Document</span>&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./dist/include-openlayers-local.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./config/map/gao.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./config/css/map.css&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">onclick</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;overAnalysis()&#34;</span>&gt;<span style="color:#a6e22e">å åŠ åˆ†æ</span>&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;map&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;gdbp://MapGISLocalPlus/gdb_0802/sfcls/å±…æ°‘åŒº&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">vectorData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">url</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">vecLayer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Map</span>.<span style="color:#a6e22e">GdbpLayer</span>(
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#39;&#39;</span>,
</span></span><span style="display:flex;"><span>      [<span style="color:#a6e22e">vectorData</span>], {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ip</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;localhost&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">port</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;6163&#39;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">map</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">Map</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">target</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;map&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">layers</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">vecLayer</span>],
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">view</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ol</span>.<span style="color:#a6e22e">View</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">projection</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;EPSG:4326&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">center</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">114.30</span>, <span style="color:#ae81ff">30.50</span>],
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">zoom</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">docName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mapgis0721&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ip</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;localhost&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">port</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">6163</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">docLayer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Map</span>.<span style="color:#a6e22e">Doc</span>(<span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#a6e22e">docName</span>, {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">port</span>,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// map.addLayer(docLayer)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">layerID</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* å åŠ åˆ†æ */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">resultname</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">overAnalysis</span>() {
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//2.1è®¾ç½®è¦å åŠ çš„å¤šè¾¹å½¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//æ¨¡æ‹Ÿå•†åœˆ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">geoRegion</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">GRegion</span>(
</span></span><span style="display:flex;"><span>        [
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">AnyLine</span>([
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Arc</span>(
</span></span><span style="display:flex;"><span>              [
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Point2D</span>(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">33</span>),
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Point2D</span>(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">22</span>),
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Point2D</span>(<span style="color:#ae81ff">115</span>, <span style="color:#ae81ff">22</span>),
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Point2D</span>(<span style="color:#ae81ff">115</span>, <span style="color:#ae81ff">33</span>),
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.Object.<span style="color:#a6e22e">Point2D</span>(<span style="color:#ae81ff">190</span>, <span style="color:#ae81ff">33</span>)
</span></span><span style="display:flex;"><span>              ],
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>            )
</span></span><span style="display:flex;"><span>          ])
</span></span><span style="display:flex;"><span>        ],
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>      )
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">resultname</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">+</span> Date.<span style="color:#a6e22e">now</span>();
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//2.2 åˆ›å»ºå åŠ åˆ†ææœåŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">overlayParam</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Service</span>.<span style="color:#a6e22e">OverlayByPolygon</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">port</span>, <span style="color:#75715e">//è®¿é—®IGServerçš„ç«¯å£å·ï¼Œ.netç‰ˆä¸º6163ï¼ŒJavaç‰ˆä¸º8089,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//è®¾ç½®è¢«å åŠ å›¾å±‚URL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">srcInfo1</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">vectorData</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//è®¾ç½®ç»“æœURL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">desInfo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">resultname</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//è®¾ç½®å¤šè¾¹å½¢åæ ‡åºåˆ—åŒ–å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">strGRegionXML</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">geoRegion</span>),
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//å¤šè¾¹å½¢å­—ç¬¦ä¸²è¾“å…¥æ ¼å¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">inFormat</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;json&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//è®¾ç½®ç»“æœå›¾å±‚çš„å›¾å½¢å‚æ•°ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">infoOptType</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//æ±‚äº¤
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">overType</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//å…è®¸é‡ç®—é¢ç§¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">isReCalculate</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//å®¹å·®åŠå¾„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0.05</span>,
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//2.3 æ‰§è¡Œå åŠ åˆ†æ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//è°ƒç”¨åŸºç±»çš„executeæ–¹æ³•,æ‰§è¡Œå åŠ åˆ†æ,onSuccessä¸ºç»“æœå›è°ƒå‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">overlayParam</span>.<span style="color:#a6e22e">execute</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">onSuccess</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;post&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;json&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">onError</span>
</span></span><span style="display:flex;"><span>      )
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//2-4ã€åˆ†æç»“æœæ˜¾ç¤ºåˆ°åœ°å›¾å®¹å™¨ä¸Š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onSuccess</span>(<span style="color:#a6e22e">result</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">result</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">succeed</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">removeLayer</span>(<span style="color:#a6e22e">vecLayer</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">resultname</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">resultLayer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Map</span>.<span style="color:#a6e22e">GdbpLayer</span>(<span style="color:#e6db74">&#39;&#39;</span>, [<span style="color:#a6e22e">resultname</span>], {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">ip</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;localhost&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">port</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;6163&#39;</span>
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">addLayer</span>(<span style="color:#a6e22e">resultLayer</span>)
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onError</span>(<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="3ç¼“å†²åŒºåˆ†æ">3.ç¼“å†²åŒºåˆ†æ</h3>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="åœ°å›¾æ–‡æ¡£ç›®å½•">åœ°å›¾æ–‡æ¡£ç›®å½•</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="è·å–igserverçš„æœåŠ¡åˆ—è¡¨">è·å–IGserverçš„æœåŠ¡åˆ—è¡¨</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">docCatalog</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Catalog</span>.<span style="color:#a6e22e">MapDoc</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">port</span>,
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span><span style="color:#75715e">//è°ƒç”¨getMapDocListæ–¹æ³•ï¼Œè·å–æœåŠ¡å™¨åœ°å›¾æ–‡æ¡£åˆ—è¡¨ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­å¤„ç†ç»“æœ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">docCatalog</span>.<span style="color:#a6e22e">getMapDocList</span>(<span style="color:#a6e22e">getListSuccess</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">getListSuccess</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">succeed</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;æ²¡æœ‰è·å–åˆ°çŸ¢é‡åœ°å›¾æ–‡æ¡£ï¼&#39;</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//å°†ä¸€ä¸ªJSONè½¬æ¢æˆä¸€ä¸ªåŒ…å«JSONæ–‡æœ¬çš„å­—ç¬¦ä¸²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">formatData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">formatData</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>    
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="è·å–æ–‡æ¡£ä¸‹çš„å›¾å±‚åˆ—è¡¨">è·å–æ–‡æ¡£ä¸‹çš„å›¾å±‚åˆ—è¡¨</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">docCatalog</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Catalog</span>.<span style="color:#a6e22e">MapDoc</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ip</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">port</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">port</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//è®¾ç½®åœ°å›¾æ–‡æ¡£çš„åç§°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">docName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">DOCNAME</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//è®¾ç½®åœ°å›¾çš„ç´¢å¼•å·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">mapIndex</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//è°ƒç”¨getLayersInfoå‡½æ•°ï¼Œè·å–åœ°å›¾æ–‡æ¡£ä¸­æ‰€æœ‰å›¾å±‚ç›¸å…³ä¿¡æ¯ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­å¤„ç†ç»“æœ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">docCatalog</span>.<span style="color:#a6e22e">getLayersInfo</span>(<span style="color:#a6e22e">getListSuccess</span>);
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="å…³äºè®¾ç½®åœ°å›¾æ–‡æ¡£çš„å›¾å±‚æ˜¾ç¤ºçŠ¶æ€">å…³äºè®¾ç½®åœ°å›¾æ–‡æ¡£çš„å›¾å±‚æ˜¾ç¤ºçŠ¶æ€</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">docLayer</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Zondy</span>.<span style="color:#a6e22e">Map</span>.<span style="color:#a6e22e">Doc</span>(<span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#a6e22e">DOCNAME</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ip</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">port</span>,
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span><span style="color:#75715e">//éšè—
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">docLayer</span>.<span style="color:#a6e22e">setLayerStatus</span>(<span style="color:#a6e22e">layerIDs</span>, <span style="color:#e6db74">&#39;hide&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">//æ˜¾ç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">docLayer</span>.<span style="color:#a6e22e">setLayerStatus</span>(<span style="color:#a6e22e">layerIDs</span>, <span style="color:#e6db74">&#39;show&#39;</span>);
</span></span></code></pre></div><p>ç»“åˆä¸Šé¢ä¸¤ä¸ªå°±å¯ä»¥åšå‡ºå›¾å±‚æ ‘</p>

          </div>
        </div>
                 
      
  
  
  
  

  

  <div class="article-paging">
    
      <section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box">
  <div class="card-cover" background-image-lazy data-img="https://cdn.nlark.com/yuque/0/2022/png/29064333/1658718036083-fe7c89ba-7662-4b1e-a80c-798c33b63bb9.png"></div>
  <div class="card-text">
    <a href="/docs/ypxwhp/"><h4 class="card-text--title text-ellipsis">OpenLayers</h4></a>
    <p class="card-text--row">2022-07-20 02:02</p>
  </div>
</section>
    
    
      <section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box">
  <div class="card-cover" background-image-lazy data-img="https://cdn.nlark.com/yuque/0/2022/png/29064333/1658215249312-2b53ff3b-c8bc-4dde-9402-c528f2cbb32e.png"></div>
  <div class="card-text">
    <a href="/docs/htsvan/"><h4 class="card-text--title text-ellipsis">react-router</h4></a>
    <p class="card-text--row">2022-07-19 01:22</p>
  </div>
</section>
    
  </div>
</div>
  <aside class="widget-info">
    
<section class="aside-widget widget-author content-padding-large soft-size--large soft-style--box">
  <div class="widget-body">
    <div class="author-box avatar">
      
      <img class="author-avatar soft-size--round soft-style--box" src="https://cdn.jsdelivr.net/gh/Sentisfate/wanhuatong@main/img/cdai.jfif" alt="gisculibur">
      
      <h2 class="author-name text-ellipsis">gisculibur</h2>
      
      <p class="author-desc text-ellipsis">æ–°æ‰‹WebGISæ”»åŸç‹®</p>
      
    </div>
  </div>
</section>


    

<section class="aside-widget widget-toc content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>ç›®å½•</span>
    </div>
  </h2>
  <div class="widget-body">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ä¸€è½¯ä»¶æ“ä½œ">ä¸€ã€è½¯ä»¶æ“ä½œ</a></li>
        <li><a href="#äºŒç¼–è¾‘è¦ç´ ">äºŒã€ç¼–è¾‘è¦ç´ </a></li>
        <li><a href="#ä¸‰å°è£…ç‚¹çº¿é¢å·¥å…·ç±»">ä¸‰ã€å°è£…ç‚¹çº¿é¢å·¥å…·ç±»</a></li>
        <li><a href="#å››å°è£…æŸ¥è¯¢">å››ã€å°è£…æŸ¥è¯¢</a></li>
        <li><a href="#äº”ç©ºé—´åˆ†æ">äº”ã€ç©ºé—´åˆ†æ</a>
          <ul>
            <li><a href="#1æ‹“æ‰‘åˆ†æ">1.æ‹“æ‰‘åˆ†æ</a></li>
            <li><a href="#2å åŠ åˆ†æ">2.å åŠ åˆ†æ</a></li>
            <li><a href="#3ç¼“å†²åŒºåˆ†æ">3.ç¼“å†²åŒºåˆ†æ</a></li>
          </ul>
        </li>
        <li><a href="#åœ°å›¾æ–‡æ¡£ç›®å½•">åœ°å›¾æ–‡æ¡£ç›®å½•</a>
          <ul>
            <li><a href="#è·å–igserverçš„æœåŠ¡åˆ—è¡¨">è·å–IGserverçš„æœåŠ¡åˆ—è¡¨</a></li>
          </ul>
        </li>
        <li><a href="#è·å–æ–‡æ¡£ä¸‹çš„å›¾å±‚åˆ—è¡¨">è·å–æ–‡æ¡£ä¸‹çš„å›¾å±‚åˆ—è¡¨</a></li>
        <li><a href="#å…³äºè®¾ç½®åœ°å›¾æ–‡æ¡£çš„å›¾å±‚æ˜¾ç¤ºçŠ¶æ€">å…³äºè®¾ç½®åœ°å›¾æ–‡æ¡£çš„å›¾å±‚æ˜¾ç¤ºçŠ¶æ€</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</section>


    










<section class="aside-widget widget-articles content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>ç›¸å…³æ–‡ç« </span>
    </div>
  </h2>
  <div class="widget-body">
    <ul class="post-list">
      
      
        <li class="post-item"><a href="/docs/ix726493ddpi6i3q/">3dTiles</a></li>
      
        <li class="post-item"><a href="/posts/qa4vydlw37pbsi3v/">WebGL å›¾åƒå¤„ç†</a></li>
      
        <li class="post-item"><a href="/docs/goz05uyu3i5v92c9/">Cesium æ¨¡å‹å‹å¹³</a></li>
      
        <li class="post-item"><a href="/docs/cl6l0mww8kkkizwb/">ä¸‰è§’å‰–åˆ†</a></li>
      
        <li class="post-item"><a href="/docs/prgrgit7lss8vggf/">GISç†è®ºåŸºç¡€</a></li>
      
        <li class="post-item"><a href="/docs/vzxnspucb4agb00w/">é—®é¢˜</a></li>
      
    </ul>
  </div>
</section>


    




<section class="aside-widget widget-categories content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>åˆ†ç±»</span>
    </div>
  </h2>
  <div class="widget-body">
    <ul class="categories-list">
      
        <li>
          <a href="https://Sentisfate.github.io/categories/webgl/">WebGL</a>
          <span>1</span>
        </li>
      
        <li>
          <a href="https://Sentisfate.github.io/categories/%E5%9B%BE%E5%BA%8A/">å›¾åºŠ</a>
          <span>1</span>
        </li>
      
    </ul>
  </div>

  
</section>


    




<section class="aside-widget widget-tags content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>æ ‡ç­¾</span>
    </div>
  </h2>
  <div class="widget-body">
    <div class="tags-list">
      
        <a href="https://Sentisfate.github.io/tags/github/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">github</a>
      
        <a href="https://Sentisfate.github.io/tags/picgo/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">picgo</a>
      
        <a href="https://Sentisfate.github.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">å›¾åƒå¤„ç†</a>
      
    </div>
  </div>

  
</section>

  </aside>
</div>
  </main><footer class="footer-container layout-block">
  
  <div class="social-icons">
    
      <a class="soft-size--primary soft-style--box" href="https://github.com/Sentisfate" target="_blank" rel="noopener noreferrer">
          
        <svg class="icon icon-github" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <path d="M64.6 512c0 195.6 125.4 361.9 300.1 422.9 23.5 5.9 19.9-10.8 19.9-22.2v-77.6c-135.8 15.9-141.3-74-150.5-89-18.5-31.5-61.9-39.5-49-54.5 31-15.9 62.5 4 98.9 58 26.4 39.1 77.9 32.5 104.1 26 5.7-23.5 17.9-44.5 34.7-60.9-140.7-25.2-199.4-111.1-199.4-213.3 0-49.5 16.4-95.1 48.4-131.8-20.4-60.6 1.9-112.4 4.9-120.1 58.2-5.2 118.5 41.6 123.3 45.3 33.1-8.9 70.8-13.7 112.9-13.7 42.4 0 80.3 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.4-43.9 2.9 7.7 24.7 58.3 5.5 118.1 32.5 36.8 49 82.8 49 132.4 0 102.3-59 188.3-200.2 213.2 23.5 23.3 38.1 55.5 38.1 91.1v112.7c0.8 9 0 17.9 15.1 17.9C832.7 877 960.4 709.4 960.4 512.1c0-247.5-200.6-447.9-447.9-447.9C265 64.1 64.6 264.5 64.6 512z"></path>
        </svg>
        

        

        

        

        
      </a>
    
  </div>
  

  <div class="colour-bar"></div>
  
  

  

  <p>
    Powered by
    <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a>
    Theme - 
    <a href="https://github.com/miiiku/hugo-theme-kagome" target="_blank" rel="noopener noreferrer author">kagome</a>
  </p>

  <p>
    <a href="javascript:;" id="theme-light">ğŸŒ æµ…è‰²</a>
    <a href="javascript:;" id="theme-dark">ğŸŒ› æ·±è‰²</a>
    <a href="javascript:;" id="theme-auto">ğŸ¤–ï¸ è‡ªåŠ¨</a>
  </p>
</footer>



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>






</body>

</html>